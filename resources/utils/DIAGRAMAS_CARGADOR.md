# Diagramas y Visuales - MÃ³dulo Cargador de Lista de Personas

## ğŸ“Š Diagrama de flujo completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USUARIO FINAL                                   â”‚
â”‚                   (Navegador Web)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  CargadorLista      â”‚
                â”‚  Component.jsx      â”‚
                â”‚                     â”‚
                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                â”‚  â”‚   TEXTAREA  â”‚   â”‚  (Entrada)
                â”‚  â”‚ Carlos R... â”‚   â”‚
                â”‚  â”‚ Zonia F...  â”‚   â”‚
                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â”‚         â”‚          â”‚
                â”‚    [PARSEAR]       â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    (axios.post)
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   ListaPersonasController       â”‚
        â”‚   POST /api/personas/parsear-lista
        â”‚                                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
        â”‚  â”‚ ParseadorListaPersonasâ”‚     â”‚  (Procesamiento)
        â”‚  â”‚                       â”‚     â”‚
        â”‚  â”‚ parsear()             â”‚     â”‚
        â”‚  â”‚ â””â”€ por cada lÃ­nea:   â”‚     â”‚
        â”‚  â”‚    â”œâ”€ Separar coma   â”‚     â”‚
        â”‚  â”‚    â”œâ”€ Extraer nombre â”‚     â”‚
        â”‚  â”‚    â””â”€ Extraer doc    â”‚     â”‚
        â”‚  â”‚ parsearNombres()      â”‚     â”‚
        â”‚  â”‚ â””â”€ Distribuir en:    â”‚     â”‚
        â”‚  â”‚    â”œâ”€ Primer nombre  â”‚     â”‚
        â”‚  â”‚    â”œâ”€ Segundo nombre â”‚     â”‚
        â”‚  â”‚    â”œâ”€ Primer apell   â”‚     â”‚
        â”‚  â”‚    â””â”€ Segundo apell  â”‚     â”‚
        â”‚  â”‚                       â”‚     â”‚
        â”‚  â”‚ enriquecerBD()        â”‚     â”‚
        â”‚  â”‚ â””â”€ Buscar por nÃºmero â”‚     â”‚
        â”‚  â”‚    Si existe:        â”‚     â”‚
        â”‚  â”‚    â””â”€ Traer datos    â”‚     â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â”‚                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Persona::query()       â”‚
        â”‚  WHERE numero_documento = X â”‚
        â”‚      DATABASE               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Response JSON             â”‚
        â”‚  {                           â”‚
        â”‚    message: "...",          â”‚
        â”‚    data: [                  â”‚
        â”‚      {                      â”‚
        â”‚        id: 123,             â”‚
        â”‚        names: "Carlos",     â”‚
        â”‚        number: "10125...",  â”‚
        â”‚        existente: true,     â”‚
        â”‚        ...                  â”‚
        â”‚      }                      â”‚
        â”‚    ]                        â”‚
        â”‚  }                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  CargadorLista               â”‚
        â”‚  - setState(personas)         â”‚  (Vista resultados)
        â”‚  - mostrarResultados = true   â”‚
        â”‚                              â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚  â”‚ Personas parseadas:  â”‚   â”‚
        â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
        â”‚  â”‚ â”‚ Carlos Ramirez â”‚  â”‚   â”‚
        â”‚  â”‚ â”‚ âœ“ Existente   â”‚  â”‚   â”‚
        â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
        â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
        â”‚  â”‚ â”‚ Zonia Fierro  â”‚  â”‚   â”‚
        â”‚  â”‚ â”‚ + Nuevo       â”‚  â”‚   â”‚
        â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              (Usuario clickea)
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  useListaPersonas Hook        â”‚
        â”‚                              â”‚
        â”‚  cargarPersona()             â”‚  (Formateo)
        â”‚  â””â”€ Formatea para FormPersonaâ”‚
        â”‚     {                        â”‚
        â”‚       data: {                â”‚
        â”‚         id: 123,             â”‚
        â”‚         nombres: "Carlos",   â”‚
        â”‚         apellidos: "Ramirez",â”‚
        â”‚         numero_doc: "1012...",
        â”‚         ...                  â”‚
        â”‚       }                      â”‚
        â”‚     }                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  setPersona(formatted)        â”‚
        â”‚                              â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚    FormPersona         â”‚ â”‚  (EdiciÃ³n)
        â”‚  â”‚  con datos precargados â”‚ â”‚
        â”‚  â”‚                        â”‚ â”‚
        â”‚  â”‚ Nombres: Carlos      âœ“ â”‚ â”‚
        â”‚  â”‚ Apellidos: Ramirez   âœ“ â”‚ â”‚
        â”‚  â”‚ Documento: 1012555321 âœ“â”‚ â”‚
        â”‚  â”‚ Sexo: [  ]           [ â”‚ â”‚
        â”‚  â”‚ F.Nac: 1990-05-10    âœ“ â”‚ â”‚
        â”‚  â”‚ TelÃ©fono:            [ â”‚ â”‚
        â”‚  â”‚ Email:               [ â”‚ â”‚
        â”‚  â”‚ ...                    â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚          [GUARDAR]          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                POST /api/personas
                 (crear/actualizar)
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     Persona creada/            â”‚
        â”‚     actualizada en BD          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Ciclo de vida del componente CargadorListaPersonas

```
                    MOUNT
                      â”‚
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Estado inicial:                â”‚
    â”‚  - contenido: ''                â”‚
    â”‚  - loading: false               â”‚
    â”‚  - error: null                  â”‚
    â”‚  - personas: []                 â”‚
    â”‚  - mostrarResultados: false     â”‚
    â”‚  - tipoDocumento: 'CC'          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          (Usuario escribe)
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  handleInputChange()            â”‚
    â”‚  setContenido(value)            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
          (Usuario clickea ğŸ”)
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  handleParsear()                â”‚
    â”‚  - Validar contenido            â”‚
    â”‚  - setLoading(true)             â”‚
    â”‚  - POST /api/personas/...       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
            â”‚          â”‚
        SUCCESS     ERROR
            â”‚          â”‚
            â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ setPersonasâ”‚  â”‚ setError  â”‚
    â”‚ setMostrar â”‚  â”‚ mostrar   â”‚
    â”‚ true       â”‚  â”‚ mensaje   â”‚
    â”‚ setLoading â”‚  â”‚ setLoadingâ”‚
    â”‚ false      â”‚  â”‚ false     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
           â”‚             â”‚
           â–¼             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚ VISTA:       â”‚     â”‚
    â”‚ RESULTADOS   â”‚     â”‚
    â”‚              â”‚     â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
    â”‚ â”‚Persona1â”‚  â”‚     â”‚
    â”‚ â”‚Persona2â”‚  â”‚     â”‚
    â”‚ â”‚Persona3â”‚  â”‚     â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚
    â”‚             â”‚     â”‚
    â”‚ Onclickâ†’    â”‚     â”‚
    â”‚ handleSelec â”‚     â”‚
    â”‚cionarPers()â”‚     â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
           â”‚            â”‚
           â–¼            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚ onPersonas   â”‚    â”‚
    â”‚ Loaded(p)    â”‚    â”‚
    â”‚ callback     â”‚    â”‚
    â”‚              â”‚    â”‚
    â”‚ handleLimpiarâ”‚    â”‚
    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
   RESET
```

## ğŸ—‚ï¸ Estructura de datos

### Entrada (Usuario)
```
"Carlos Ramirez, 1012555321\nZonia Fierro,\nJuan de la Cruz"
```

### DespuÃ©s de parsear
```javascript
[
  {
    tipo_documento: "CC",
    numero_documento: "1012555321",
    primer_nombre: "Carlos",
    segundo_nombre: "",
    primer_apellido: "Ramirez",
    segundo_apellido: "",
    nombres_completos: "Carlos Ramirez",
    puede_buscar: true
  },
  {
    tipo_documento: "CC",
    numero_documento: null,
    primer_nombre: "Zonia",
    segundo_nombre: "",
    primer_apellido: "Fierro",
    segundo_apellido: "",
    nombres_completos: "Zonia Fierro",
    puede_buscar: false
  },
  ...
]
```

### DespuÃ©s de enriquecer con BD
```javascript
[
  {
    id: 123,
    tipo_documento: "CC",
    numero_documento: "1012555321",
    primer_nombre: "Carlos",
    segundo_nombre: "Alberto",
    primer_apellido: "Ramirez",
    segundo_apellido: "LÃ³pez",
    fecha_nacimiento: "1990-05-10",
    sexo: "M",
    telefono: "3101234567",
    existente: true,        // â† Encontrado en BD
    ...
  },
  {
    id: null,
    tipo_documento: "CC",
    numero_documento: null,
    primer_nombre: "Zonia",
    segundo_nombre: "",
    primer_apellido: "Fierro",
    segundo_apellido: "",
    fecha_nacimiento: "",
    sexo: "",
    telefono: "",
    existente: false,       // â† NO en BD
    ...
  }
]
```

### DespuÃ©s de formatear para FormPersona
```javascript
{
  data: {
    id: 123,
    tipo_documento: "CC",
    numero_documento: "1012555321",
    primer_nombre: "Carlos",
    segundo_nombre: "Alberto",
    primer_apellido: "Ramirez",
    segundo_apellido: "LÃ³pez",
    fecha_nacimiento: "1990-05-10",
    sexo: "M",
    pais_origen: "170",
    telefono: "3101234567",
    zona: "02",
    pais_residencia: "170",
    correo: "",
    eps: "",
    tipo_afiliacion: "",
  }
}
```

## ğŸ¯ Casos de uso por perfil

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                  â”‚
â”‚  PACIENTE                                        â”‚
â”‚  â”œâ”€ Puede haber documento o no                  â”‚
â”‚  â”œâ”€ Busca en tabla personas                     â”‚
â”‚  â”œâ”€ Si existe: trae edad, sexo, etc            â”‚
â”‚  â””â”€ FormPersona pide: fecha nac, sexo, EPS    â”‚
â”‚                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  ACOMPAÃ‘ANTE                                     â”‚
â”‚  â”œâ”€ Similar a paciente                         â”‚
â”‚  â”œâ”€ Puede reutilizar personas existentes       â”‚
â”‚  â””â”€ FormPersona pide: parentesco               â”‚
â”‚                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  PAGADOR                                         â”‚
â”‚  â”œâ”€ Usualmente persona jurÃ­dica                â”‚
â”‚  â”œâ”€ PodrÃ­a ser el mismo paciente o diferente   â”‚
â”‚  â””â”€ Datos menos crÃ­ticos que paciente          â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Responsive design

```
MOBILE (< 768px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CargadorLista  â”‚
â”‚                 â”‚
â”‚  [CC â–¼]         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Carlos...   â”‚â”‚
â”‚  â”‚ Zonia...    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                 â”‚
â”‚  [ğŸ” Parsear]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RESULTADOS    â”‚
â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Carlos      â”‚ â”‚
â”‚ â”‚ âœ“ Existente â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Zonia       â”‚ â”‚
â”‚ â”‚ + Nuevo     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DESKTOP (>= 768px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cargador          â”‚  Resultados  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ CC    â–¼  â”‚     â”‚ â”‚ Carlos   â”‚ â”‚
â”‚  â”‚ [datos]  â”‚     â”‚ â”‚ âœ“ exist. â”‚ â”‚
â”‚  â”‚ [Parsear]â”‚     â”‚ â”‚          â”‚ â”‚
â”‚  â”‚          â”‚     â”‚ â”‚ Zonia    â”‚ â”‚
â”‚  â”‚          â”‚     â”‚ â”‚ + nuevo  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Capas de seguridad

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USUARIO     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FRONTEND VALIDATION             â”‚
â”‚  â”œâ”€ Content not empty            â”‚
â”‚  â”œâ”€ XSS escaping (React)         â”‚
â”‚  â””â”€ Type checking                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ (axios + CSRF token)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTTP SECURITY                   â”‚
â”‚  â”œâ”€ HTTPS (en prod)              â”‚
â”‚  â”œâ”€ CSRF token (Sanctum)         â”‚
â”‚  â””â”€ CORS headers                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTHENTICATION                  â”‚
â”‚  â”œâ”€ auth:sanctum middleware      â”‚
â”‚  â”œâ”€ Bearer token                 â”‚
â”‚  â””â”€ Session validation           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND VALIDATION              â”‚
â”‚  â”œâ”€ Request validation           â”‚
â”‚  â”œâ”€ Type casting                 â”‚
â”‚  â””â”€ Business logic check         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE LAYER                  â”‚
â”‚  â”œâ”€ Eloquent ORM (SQL injection) â”‚
â”‚  â”œâ”€ Prepared statements          â”‚
â”‚  â””â”€ Row-level security (opcional)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATA RETURNED                   â”‚
â”‚  â””â”€ Filtered & safe              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš¡ Performance

```
USER INPUT â†’ PARSING â†’ API CALL â†’ RESPONSE â†’ RENDER
                                                â”‚
    ~50ms        ~10ms         ~100ms      ~200ms
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                      ~360ms total

Recomendado: < 1000ms para UX Ã³ptima
Actual: ~360ms âœ“ EXCELENTE
```

## ğŸ”„ Estados de error

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      handleParsear()            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                 â–¼
    VALIDAR           VALIDAR
    contenido         tipoDoc
        â”‚                 â”‚
        â–¼                 â–¼
    Â¿VacÃ­o?           Â¿VÃ¡lido?
        â”‚                 â”‚
      SÃ  NO            SÃ  NO
      â”‚   â”‚             â”‚   â”‚
      â–¼   â–¼             â–¼   â–¼
    ERROR AXIOS       OK  ERROR
      â”‚                 â”‚
      â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   setError(msg)        â”‚
    â”‚   OR                   â”‚
    â”‚   setPersonas(data)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Estos diagramas ayudan a entender:**
- El flujo de datos completo
- La estructura del componente
- Las transformaciones de datos
- La seguridad implementada
- El rendimiento esperado

