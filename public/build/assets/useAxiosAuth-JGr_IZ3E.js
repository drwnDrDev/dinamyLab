import{r as o}from"./index-C2KC86Ta.js";import{a as e}from"./index-B9ygI19o.js";e.defaults.withCredentials=!0;const l=()=>{const[c,t]=o.useState(!1),[i,a]=o.useState(null),n=async()=>{try{await e.get("/sanctum/csrf-cookie"),console.log("✅ CSRF cookie obtenida"),t(!0),a(null)}catch(s){console.error("❌ Error al obtener CSRF cookie:",s),a(s.message),t(!1)}};return o.useEffect(()=>{n()},[]),o.useEffect(()=>{const s=e.interceptors.response.use(r=>r,async r=>(r.response?.status===401&&(console.warn("⚠️ Sesión expirada, renovando cookie..."),await n()),Promise.reject(r)));return()=>{e.interceptors.response.eject(s)}},[]),{axiosInstance:e,csrfLoaded:c,error:i}};export{l as u};
