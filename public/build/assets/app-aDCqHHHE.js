import{r as v,R as e}from"./index-C2KC86Ta.js";import{c as w}from"./client-DCM6oUEP.js";import{u as k}from"./useAxiosAuth-JGr_IZ3E.js";/* empty css            */import{a as K}from"./index-B9ygI19o.js";import{T as O}from"./Typewriter-DpIIvn7w.js";const j=()=>{const{axiosInstance:n,csrfLoaded:i}=k(),[r,d]=v.useState({serviciosHabilitados:{nombre:"Servicios Habilitados",clases:"bg-blue-200 text-blue-900",datos:[],visibles:[],activos:[],todos:[],activo:!1,activeChange:"api/servicios-habilitados",localStorageKey:"servicios_habilitados_data",endpoint:"/api/servicios-habilitados",dataKey:"data"},viasIngreso:{nombre:"Vías de Ingreso",clases:"bg-green-200 text-green-900",datos:[],visibles:[],activos:[],todos:[],activo:!1,activeChange:"api/via-ingreso",localStorageKey:"vias_ingreso_data",endpoint:"/api/via-ingreso",dataKey:"data"},diagnosticos:{nombre:"Diagnósticos",clases:"bg-stone-200 text-stone-900",datos:[],visibles:[],activos:[],todos:[],activo:!1,activeChange:"api/cie10",localStorageKey:"default_cies_data",endpoint:"/api/cie10",dataKey:"data"},finalidades:{nombre:"Finalidades",clases:"bg-yellow-200 text-yellow-900",datos:[],visibles:[],activos:[],todos:[],activo:!1,activeChange:"api/finalidades",localStorageKey:"finalidad_consulta_data",endpoint:"/api/finalidades",dataKey:"data.finalidades"},causasExternas:{nombre:"Causas Externas",clases:"bg-purple-200 text-purple-900",datos:[],visibles:[],activos:[],todos:[],activo:!1,activeChange:"api/causa-atencion",localStorageKey:"causas_externas_data",endpoint:"/api/causa-atencion",dataKey:"data.causas_externas"},tiposAtencion:{nombre:"Modalidades de Atención",clases:"bg-teal-200 text-teal-900",datos:[],visibles:[],activos:[],todos:[],activo:!1,activeChange:"api/modalidades-atencion",localStorageKey:"tipos_atencion_data",endpoint:"/api/modalidades-atencion",dataKey:"data.modalidades_atencion"},tiposAfiliacion:{nombre:"Tipos de Afiliación",clases:"bg-pink-200 text-pink-900",datos:[],visibles:[],activos:[],todos:[],activo:!1,activeChange:"api/tipos-afiliacion",localStorageKey:"tipos_afiliacion_data",endpoint:"/api/tipos-afiliacion",dataKey:"data"}}),[s,y]=v.useState(""),[a,h]=v.useState("todos"),_=(t,o)=>o.split(".").reduce((m,l)=>m&&m[l],t)||[];v.useEffect(()=>{if(!i)return;(async()=>{try{const m=Object.keys(r).map(c=>n.get(r[c].endpoint).then(f=>({key:c,data:_(f.data,r[c].dataKey)})).catch(f=>(console.error(`Error al cargar ${r[c].nombre}:`,f),{key:c,data:[]}))),l=await Promise.allSettled(m);d(c=>{const f={...c};return l.forEach(E=>{if(E.status==="fulfilled"){const{key:N,data:x}=E.value,S=x;f[N].datos=S,f[N].todos=S,f[N].activos=S.filter(A=>A.activo),f[N].visibles=S}}),f})}catch(o){console.error("Error al inicializar los datos:",o)}})()},[i]),v.useEffect(()=>{const t=Object.keys(r).find(o=>r[o].activo);t&&u(t)},[a,s]);const C=(t,o,m)=>{const l=o.toLowerCase();return t.nombre&&t.nombre.toLowerCase().includes(l)||t.descripcion&&t.descripcion.toLowerCase().includes(l)||(m?t.grupo&&t.grupo.toLowerCase().includes(l)||t.codigo==parseInt(l):t.codigo&&t.codigo.toLowerCase().includes(l))},u=t=>{d(o=>{const m=o[t].datos;let l;return a==="activos"?l=m.filter(c=>c.activo):a==="inactivos"?l=m.filter(c=>!c.activo):l=m,s&&(l=l.filter(c=>C(c,s,t==="serviciosHabilitados"))),{...o,[t]:{...o[t],visibles:l}}})},I=t=>{d(o=>{const m={};return Object.keys(o).forEach(l=>{m[l]={...o[l],activo:l===t?!o[l].activo:!1}}),m})},g=async(t,o)=>{const m=r[o],l=`${window.location.origin}/${m.activeChange}/${t.codigo}/activar`;try{const c=await n.patch(l);if(c.status<200||c.status>=300)throw new Error("Error en la respuesta del servidor");d(f=>{const E={...f};E[o]={...f[o],datos:f[o].datos.map(x=>x.codigo===t.codigo?{...x,activo:!x.activo}:x)};const N=E[o].datos;return E[o].todos=N,E[o].activos=N.filter(x=>x.activo),localStorage.setItem(E[o].localStorageKey,JSON.stringify(E[o].activos)),u(o),E})}catch(c){console.error("Error:",c)}},b=Object.keys(r).find(t=>r[t].activo),p=b?r[b]:null;return e.createElement("div",{className:"p-4"},e.createElement("div",{className:"flex flex-wrap gap-2 mb-4"},Object.keys(r).map(t=>e.createElement("button",{key:t,onClick:()=>I(t),className:`px-4 py-2 rounded ${r[t].activo?r[t].clases:"bg-gray-200 text-white"}`},r[t].nombre))),e.createElement("input",{type:"text",placeholder:"Buscar...",className:"w-full p-2 mb-4 border rounded",value:s,onChange:t=>y(t.target.value)}),p&&e.createElement("div",{className:"mb-4"},e.createElement("button",{className:"bg-cyan-500 text-white font-bold py-2 px-4 rounded mr-2",onClick:()=>h("activos")},"Activos (",p.activos.length,")"),e.createElement("button",{className:"bg-yellow-500 text-white font-bold py-2 px-4 rounded mr-2",onClick:()=>h("inactivos")},"Inactivos (",p.todos.length-p.activos.length,")"),e.createElement("button",{className:"bg-purple-500 text-white font-bold py-2 px-4 rounded mr-2",onClick:()=>h("todos")},"Todos (",p.todos.length,")")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},p?.visibles.map(t=>e.createElement("div",{key:t.codigo,className:"border p-2 mb-2 bg-pink-50 dark:bg-gray-800 rounded shadow"},e.createElement("h3",{className:"font-bold col-span-4"},t.nombre||"Sin nombre"),e.createElement("p",null,t.codigo||"Sin código"),e.createElement("button",{className:`mt-2 px-4 py-2 rounded ${t.activo?"bg-red-500":"bg-green-500"} text-white font-bold`,onClick:o=>{o.stopPropagation(),b&&g(t,b)}},t.activo?"Desactivar":"Activar")))))};function B(n){const[i,r]=v.useState(0),[d,s]=v.useState(n.authUser.nombre==="luis");function y(){r(i+1),s(!d)}return e.createElement("div",null,[e.createElement("h1",null,"React Test Component - Count: "+i),e.createElement("p",null,"Login User: "+n.loginUser),e.createElement("p",null,"Register User: "+n.registerUser),e.createElement("button",{className:d?"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-300":"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-green-600 transition-colors duration-300",onClick:()=>y()},"Click Me")])}function D(n){const[i,r]=v.useState(!1),d=()=>{r(s=>!s)};return e.createElement("div",{className:"relative inline-block text-left"},e.createElement("div",null,e.createElement("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500",id:"menu-button","aria-expanded":i?"true":"false","aria-haspopup":"true",onClick:()=>{d(),setTimeout(()=>r(!1),1200)}},n.name,e.createElement("svg",{className:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},e.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.584l3.71-4.354a.75.75 0 111.14.976l-4.25 5a.75.75 0 01-1.14 0l-4.25-5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})))),i?e.createElement("div",{className:"origin-top-right absolute right-0 mt-2 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabIndex:"-1"},e.createElement("div",{className:"py-1",role:"none"},e.createElement("a",{href:n.profileUrl,className:"text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100",role:"menuitem",tabIndex:"-1",id:"menu-item-0"},"Perfil"),e.createElement("button",{className:"text-gray-700 block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",role:"menuitem",tabIndex:"-1",id:"menu-item-3",onClick:()=>{K.post("/logout").then(()=>{window.location.href="/login"})}},"Cerrar sesión"))):null)}function R({sedes:n,modalidades:i,csrfToken:r,actionUrl:d}){const[s,y]=v.useState({nombres_completos:"",tipo_documento:"CC",numero_documento:"",telefono_contacto:"",email:"",fecha_deseada:"",hora_deseada:"",sede_id:"",modalidad_id:"",motivo:"",observaciones:""}),[a,h]=v.useState({}),[_,C]=v.useState(!1),u=g=>{const{name:b,value:p}=g.target;y(t=>({...t,[b]:p})),a[b]&&h(t=>({...t,[b]:null}))},I=async g=>{g.preventDefault(),C(!0),h({});try{const b=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r,Accept:"application/json"},body:JSON.stringify(s)}),p=await b.json();if(!b.ok){p.errors?h(p.errors):alert(p.message||"Error al registrar la cita"),C(!1);return}p.redirect&&(window.location.href=p.redirect)}catch(b){console.error("Error:",b),alert("Error al procesar la solicitud"),C(!1)}};return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8"},e.createElement("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8"},e.createElement("div",{className:"mb-8"},e.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Registrar Nueva Cita"),e.createElement("p",{className:"text-gray-600"},"Complete el formulario para agendar su cita. No requiere autenticación.")),e.createElement("form",{onSubmit:I,className:"space-y-6"},e.createElement("div",{className:"border-b pb-6"},e.createElement("h2",{className:"text-xl font-semibold text-gray-800 mb-4"},"Datos Personales"),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Nombres Completos *"),e.createElement("input",{type:"text",name:"nombres_completos",value:s.nombres_completos,onChange:u,placeholder:"Ej: Juan Pérez García",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.nombres_completos?"border-red-500":"border-gray-300"}`}),a.nombres_completos&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.nombres_completos[0])),e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Documento *"),e.createElement("select",{name:"tipo_documento",value:s.tipo_documento,onChange:u,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.tipo_documento?"border-red-500":"border-gray-300"}`},e.createElement("option",{value:"CC"},"Cédula de Ciudadanía"),e.createElement("option",{value:"CE"},"Cédula de Extranjería"),e.createElement("option",{value:"TI"},"Tarjeta de Identidad"),e.createElement("option",{value:"PA"},"Pasaporte"),e.createElement("option",{value:"PE"},"Permiso Especial")),a.tipo_documento&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.tipo_documento[0])),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Número de Documento *"),e.createElement("input",{type:"text",name:"numero_documento",value:s.numero_documento,onChange:u,placeholder:"Ej: 1234567890",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.numero_documento?"border-red-500":"border-gray-300"}`}),a.numero_documento&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.numero_documento[0]))),e.createElement("div",{className:"grid grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Teléfono de Contacto *"),e.createElement("input",{type:"tel",name:"telefono_contacto",value:s.telefono_contacto,onChange:u,placeholder:"Ej: 3001234567",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.telefono_contacto?"border-red-500":"border-gray-300"}`}),a.telefono_contacto&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.telefono_contacto[0])),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Correo Electrónico *"),e.createElement("input",{type:"email",name:"email",value:s.email,onChange:u,placeholder:"Ej: usuario@ejemplo.com",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.email?"border-red-500":"border-gray-300"}`}),a.email&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.email[0])))),e.createElement("div",{className:"border-b pb-6"},e.createElement("h2",{className:"text-xl font-semibold text-gray-800 mb-4"},"Información de la Cita"),e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Fecha Deseada *"),e.createElement("input",{type:"date",name:"fecha_deseada",value:s.fecha_deseada,onChange:u,min:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.fecha_deseada?"border-red-500":"border-gray-300"}`}),a.fecha_deseada&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.fecha_deseada[0])),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Hora Deseada *"),e.createElement("input",{type:"time",name:"hora_deseada",value:s.hora_deseada,onChange:u,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.hora_deseada?"border-red-500":"border-gray-300"}`}),a.hora_deseada&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.hora_deseada[0]))),e.createElement("div",{className:"grid grid-cols-2 gap-4 mb-4"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Sede (Opcional)"),e.createElement("select",{name:"sede_id",value:s.sede_id,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},e.createElement("option",{value:""},"Seleccione una sede..."),n.map(g=>e.createElement("option",{key:g.id,value:g.id},g.nombre," - ",g.ciudad)))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Modalidad de Atención (Opcional)"),e.createElement("select",{name:"modalidad_id",value:s.modalidad_id,onChange:u,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"},e.createElement("option",{value:""},"Seleccione una modalidad..."),i.map(g=>e.createElement("option",{key:g.id,value:g.id},g.nombre))))),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Motivo de la Cita"),e.createElement("input",{type:"text",name:"motivo",value:s.motivo,onChange:u,placeholder:"Ej: Chequeo general de salud",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${a.motivo?"border-red-500":"border-gray-300"}`}),a.motivo&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.motivo[0])),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Observaciones Adicionales"),e.createElement("textarea",{name:"observaciones",value:s.observaciones,onChange:u,placeholder:"Información adicional que considere importante...",rows:"4",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none ${a.observaciones?"border-red-500":"border-gray-300"}`}),a.observaciones&&e.createElement("p",{className:"mt-1 text-sm text-red-600"},a.observaciones[0]))),e.createElement("div",{className:"flex gap-4 pt-4"},e.createElement("button",{type:"submit",disabled:_,className:"flex-1 bg-indigo-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200"},_?"Registrando...":"Registrar Cita"),e.createElement("button",{type:"button",onClick:()=>y({nombres_completos:"",tipo_documento:"CC",numero_documento:"",telefono_contacto:"",email:"",fecha_deseada:"",hora_deseada:"",sede_id:"",modalidad_id:"",motivo:"",observaciones:""}),className:"flex-1 bg-gray-300 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-400 transition duration-200"},"Limpiar")),e.createElement("p",{className:"text-sm text-gray-500 text-center mt-4"},"Los campos marcados con * son obligatorios"))))}if(document.getElementById("registro-cita-root")){const n=document.getElementById("registro-cita-root"),i=JSON.parse(n.getAttribute("data-sedes")||"[]"),r=JSON.parse(n.getAttribute("data-modalidades")||"[]"),d=n.getAttribute("data-csrf"),s=n.getAttribute("data-action");w.createRoot(n).render(e.createElement(R,{sedes:i,modalidades:r,csrfToken:d,actionUrl:s}))}if(document.getElementById("dropdownComponent")){const n=w.createRoot(document.getElementById("dropdownComponent")),i=document.getElementById("dropdownComponent").getAttribute("data-nombre")||"nombre",r=document.getElementById("dropdownComponent").getAttribute("data-profile-url")||"/profile";n.render(e.createElement(D,{name:i,profileUrl:r}))}if(document.getElementById("typewriter")){const n=document.getElementById("typewriter"),i=n.getAttribute("text")||"Your trusted partner in clinical laboratory management";w.createRoot(n).render(e.createElement(O,{text:i,typingSpeed:50}))}if(document.getElementById("testComponent")){const n=document.getElementById("testComponent"),i=n.getAttribute("data-login-user"),r=n.getAttribute("data-register-user"),d=JSON.parse(n.getAttribute("data-auth-user"));w.createRoot(n).render(e.createElement(B,{loginUser:i,registerUser:r,authUser:d}))}document.getElementById("root")&&w.createRoot(document.getElementById("root")).render(e.createElement(j,null));
