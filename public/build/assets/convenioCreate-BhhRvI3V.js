import{r as c,R as e}from"./index-C2KC86Ta.js";import{c as z}from"./client-DCM6oUEP.js";function I({value:d,onChange:p,suggestions:o=[],placeholder:g="",allowCustom:S=!0,minLengthToShow:w=1,displayKey:E=null,valueKey:y=null}){const[m,s]=c.useState(d??""),[f,N]=c.useState([]),[x,n]=c.useState(!1),[l,a]=c.useState(-1),u=c.useRef(null),h=`ac-list-${c.useId()}`;c.useEffect(()=>s(d??""),[d]);const v=t=>t?E?t[E]??"":String(t):"",D=t=>t?y?t[y]??"":v(t):"";c.useEffect(()=>{function t(r){u.current&&!u.current.contains(r.target)&&(n(!1),a(-1))}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),c.useEffect(()=>{const t=m??"";if(t.length>=w){const r=t.toLowerCase(),b=o.filter(k=>v(k).toLowerCase().includes(r));N(b),n(b.length>0),a(b.length>0?0:-1)}else N([]),n(!1),a(-1)},[m,o,w]);function T(t){const r=t.target.value;s(r),p?.(r)}function _(t){const r=v(t),b=D(t);s(r),p?.(b),n(!1),a(-1)}function O(t){if(!x&&(t.key==="ArrowDown"||t.key==="ArrowUp")){f.length&&(n(!0),a(0));return}t.key==="ArrowDown"?(t.preventDefault(),a(r=>Math.min(f.length-1,Math.max(0,r+1)))):t.key==="ArrowUp"?(t.preventDefault(),a(r=>Math.min(f.length-1,Math.max(0,r-1)))):t.key==="Enter"?x&&l>=0&&l<f.length?_(f[l]):S&&(n(!1),a(-1),p?.(m)):t.key==="Escape"&&(n(!1),a(-1))}return e.createElement("div",{ref:u,style:{position:"relative",display:"inline-block",width:"100%"}},e.createElement("input",{type:"text",role:"combobox","aria-expanded":x,"aria-controls":h,"aria-autocomplete":"list","aria-activedescendant":l>=0?`${h}-item-${l}`:void 0,value:m,onChange:T,onFocus:()=>{f.length&&n(!0)},onKeyDown:O,placeholder:g,autoComplete:"off",style:{width:"100%",boxSizing:"border-box"}}),x&&e.createElement("ul",{id:h,role:"listbox",style:{position:"absolute",zIndex:10,background:"white",border:"1px solid #ccc",borderRadius:4,marginTop:2,padding:0,listStyle:"none",width:"100%",maxHeight:200,overflowY:"auto"}},f.map((t,r)=>{const b=r===l,k=v(t);return e.createElement("li",{id:`${h}-item-${r}`,key:k+"|"+r,role:"option","aria-selected":b,onClick:()=>_(t),onMouseDown:C=>C.preventDefault(),onMouseEnter:()=>a(r),style:{padding:"6px 8px",cursor:"pointer",background:b?"#eee":"transparent",borderBottom:"1px solid #eee"}},k)})))}function M({documentos:d=[],onSubmit:p=null}){const[o,g]=c.useState({tipo_documento:d.length>0?d[0]?.cod_dian:"91",numero_documento:"",razon_social:"",telefono:"",correo:"",municipio:"",direccion:"",pais:"",redes:{whatsapp:"",maps:"",linkedin:"",facebook:"",instagram:"",tiktok:"",youtube:"",website:"",otras_redes:""}}),[S,w]=c.useState([]),[E,y]=c.useState([]);c.useEffect(()=>{const n=localStorage.getItem("paises_data");if(n)try{const a=JSON.parse(n);w(a)}catch(a){console.error("Error al parsear países del localStorage:",a),w([])}const l=localStorage.getItem("municipios_data");if(l)try{const a=JSON.parse(l);y(a)}catch(a){console.error("Error al parsear municipios del localStorage:",a),y([])}},[]);const m=n=>{const{name:l,value:a}=n.target;g(u=>({...u,[l]:a}))},s=n=>{const{name:l,value:a}=n.target,u=l.replace("redes[","").replace("]","");g(i=>({...i,redes:{...i.redes,[u]:a}}))},f=n=>{g(l=>({...l,pais:n}))},N=n=>{g(l=>({...l,municipio:n}))},x=async n=>{if(n.preventDefault(),p)p(o);else{const l=n.target,a=new FormData;Object.keys(o).forEach(i=>{i==="redes"?Object.keys(o.redes).forEach(h=>{a.append(`redes[${h}]`,o.redes[h])}):a.append(i,o[i])});const u=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");u&&a.append("_token",u);try{const i=await fetch(l.action||"/convenios",{method:"POST",body:a});i.ok?window.location.href="/convenios":console.error("Error en la respuesta:",i.statusText)}catch(i){console.error("Error al enviar el formulario:",i)}}};return e.createElement("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8"},e.createElement("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},e.createElement("div",{className:"p-6 bg-white border-b border-gray-200"},e.createElement("form",{onSubmit:x,className:"w-full max-w-screen mx-auto"},e.createElement("div",{className:"mb-4"},e.createElement("label",{htmlFor:"tipo_documento",className:"block text-gray-700 text-sm font-bold mb-2"},"Tipo de Documento:"),e.createElement("select",{name:"tipo_documento",id:"tipo_documento",value:o.tipo_documento,onChange:m,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0},d.map(n=>e.createElement("option",{key:n.id,value:n.cod_dian},n.nombre)))),e.createElement("div",{className:"mb-4"},e.createElement("label",{htmlFor:"numero_documento",className:"block text-gray-700 text-sm font-bold mb-2"},"Número de Documento:"),e.createElement("input",{type:"text",name:"numero_documento",id:"numero_documento",value:o.numero_documento,onChange:m,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"razon_social",className:"block text-gray-700 text-sm font-bold mb-2"},"Razón Social:"),e.createElement("input",{type:"text",name:"razon_social",id:"razon_social",value:o.razon_social,onChange:m,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})),e.createElement("hr",{className:"my-8 border-1 border-borders"}),e.createElement("div",{className:"row-inputs pt-2 w-full md:flex justify-between gap-2"},e.createElement("div",{className:"w-full pb-2"},e.createElement("label",{htmlFor:"telefono",className:"block text-gray-700 text-sm font-bold mb-2"},"Teléfono"),e.createElement("input",{type:"number",id:"telefono",name:"telefono",value:o.telefono,onChange:m,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"w-full pb-2"},e.createElement("label",{htmlFor:"correo",className:"block text-gray-700 text-sm font-bold mb-2"},"Correo"),e.createElement("input",{type:"email",id:"correo",name:"correo",value:o.correo,onChange:m,placeholder:"example@mail.com",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}))),e.createElement("div",{className:"row-inputs pt-2 w-full md:grid md:grid-cols-3 gap-2"},e.createElement("div",{className:"w-full pb-2"},e.createElement("label",{htmlFor:"municipio",className:"block text-gray-700 text-sm font-bold mb-2"},"Ciudad"),e.createElement(I,{value:o.municipio,onChange:N,suggestions:E,placeholder:"Empieza a escribir (mínimo 3 letras)...",minLengthToShow:3,allowCustom:!0,displayKey:"municipio",valueKey:"codigo"})),e.createElement("div",{className:"w-full pb-2 md:col-span-2"},e.createElement("label",{htmlFor:"direccion",className:"block text-gray-700 text-sm font-bold mb-2"},"Dirección"),e.createElement("input",{type:"text",id:"direccion",name:"direccion",value:o.direccion,onChange:m,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}))),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"pais",className:"block text-gray-700 text-sm font-bold mb-2"},"País:"),e.createElement(I,{value:o.pais,onChange:f,suggestions:S,placeholder:"Empieza a escribir (mínimo 3 letras)...",minLengthToShow:3,allowCustom:!0,displayKey:"nombre"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"whatsapp",className:"block text-gray-700 text-sm font-bold mb-2"},"WhatsApp:"),e.createElement("input",{type:"text",id:"whatsapp",name:"redes[whatsapp]",value:o.redes.whatsapp,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"maps",className:"block text-gray-700 text-sm font-bold mb-2"},"Google Maps:"),e.createElement("input",{type:"text",id:"maps",name:"redes[maps]",value:o.redes.maps,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"linkedin",className:"block text-gray-700 text-sm font-bold mb-2"},"LinkedIn:"),e.createElement("input",{type:"text",id:"linkedin",name:"redes[linkedin]",value:o.redes.linkedin,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"facebook",className:"block text-gray-700 text-sm font-bold mb-2"},"Facebook:"),e.createElement("input",{type:"text",id:"facebook",name:"redes[facebook]",value:o.redes.facebook,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"instagram",className:"block text-gray-700 text-sm font-bold mb-2"},"Instagram:"),e.createElement("input",{type:"text",id:"instagram",name:"redes[instagram]",value:o.redes.instagram,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"tiktok",className:"block text-gray-700 text-sm font-bold mb-2"},"TikTok:"),e.createElement("input",{type:"text",id:"tiktok",name:"redes[tiktok]",value:o.redes.tiktok,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"youtube",className:"block text-gray-700 text-sm font-bold mb-2"},"YouTube:"),e.createElement("input",{type:"text",id:"youtube",name:"redes[youtube]",value:o.redes.youtube,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"website",className:"block text-gray-700 text-sm font-bold mb-2"},"Sitio Web:"),e.createElement("input",{type:"text",id:"website",name:"redes[website]",value:o.redes.website,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"mb-4 max-w-screen-sm"},e.createElement("label",{htmlFor:"otras_redes",className:"block text-gray-700 text-sm font-bold mb-2"},"Otras Redes Sociales:"),e.createElement("input",{type:"text",id:"otras_redes",name:"redes[otras_redes]",value:o.redes.otras_redes,onChange:s,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})),e.createElement("div",{className:"row-inputs py-8 w-full flex justify-center gap-2"},e.createElement("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-40"},"Guardar"))))))}const R=localStorage.getItem("documentos_pagador_data")?JSON.parse(localStorage.getItem("documentos_pagador_data")):[];localStorage.getItem("municipios_data")&&JSON.parse(localStorage.getItem("municipios_data"));localStorage.getItem("paises_data")&&JSON.parse(localStorage.getItem("paises_data"));const F=document.getElementById("convenio-form-root");if(F){const d=document.getElementById("documentos-data");let p=R;if(d)try{p=JSON.parse(d.textContent)}catch(g){console.error("Error al parsear documentos:",g)}z.createRoot(F).render(e.createElement(M,{documentos:p}))}else console.warn('No se encontró el elemento con ID "convenio-form-root"');
